#!/bin/bash

# -----------------------------------------------------------------------------
# Environment Configuration for Argo CD on AKS Deployment
#
# Instructions:
# 1. Rename this file from 'env.sh.example' to 'env.sh'.
# 2. Replace all placeholder values below with your specific settings.
# 3. Before running any deployment script, source this file: `source ./env.sh`
# -----------------------------------------------------------------------------

# --- Azure and AKS Details ---
# The name of the Azure Resource Group for your AKS cluster.
export RESOURCE_GROUP="myAKS-Argo-RG"
# The name of the AKS cluster to be created.
export CLUSTER_NAME="myArgoCDCluster"
# The Azure region where the resources will be deployed.
export LOCATION="eastus"

# --- Argo CD and TLS Details ---
# The fully qualified domain name (FQDN) where Argo CD will be accessed.
# IMPORTANT: You must own this domain and be able to configure its DNS records.
export ARGOCD_FQDN="argocd.yourdomain.com"
# The email address for Let's Encrypt to send certificate expiry notifications.
export LETSENCRYPT_EMAIL="your-email@yourdomain.com"

# --- Kubernetes Namespace Configuration ---
# The namespace for the NGINX Ingress Controller.
export INGRESS_NAMESPACE="ingress-nginx"
# The namespace for the Argo CD installation.
export ARGOCD_NAMESPACE="argocd"
# The namespace for the Cert-Manager installation.
export CERT_MANAGER_NAMESPACE="cert-manager"

# --- Microsoft Entra ID Object Names ---
# The display name for the Entra ID App Registration that will be created.
export ENTRA_APP_DISPLAY_NAME="ArgoCD-SSO-and-Workload-Identity"
# The name for the Entra ID group that will have admin permissions in Argo CD.
export ENTRA_ADMIN_GROUP_NAME="argocd-admins"
# The name for the Entra ID group that will have read-only permissions in Argo CD.
export ENTRA_READONLY_GROUP_NAME="argocd-readonly-users"

# --- Cert-Manager Configuration ---
# The name for the ClusterIssuer resource.
export CLUSTER_ISSUER_NAME="letsencrypt-prod"

# --- Derived Variables (do not change) ---
export TENANT_ID=$(az account show --query tenantId -o tsv)
